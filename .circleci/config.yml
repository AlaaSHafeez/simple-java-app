
version: 2.1

jobs:
  build-and-push:
    docker:
      - image: cimg/base:2023.03
        auth:
          username: $USER
          password: $PASSWORD      
    # Add steps to the job
    # See: https://circleci.com/docs/2.0/configuration-reference/#steps
    steps:
      # Checkout the code as the first step.
      - checkout
      # Use mvn clean and package as the standard maven build phase
      - run:
          name: Build
          # command: mvn -B -DskipTests clean package
          command: |
           service docker start
           docker build -t alaa24/java-app:1.0 .

      - run:
          name: push
          command: docker push https://hub.docker.com/alaa24/java-app:1.0 .

workflows:
  sample: # This is the name of the workflow, feel free to change it to better match your workflow.
    # Inside the workflow, you define the jobs you want to run.
    jobs:
      - build-and-push

